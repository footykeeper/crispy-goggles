<!DOCTYPE html>
<html>
<head>  
  <title>Footykeeper Time Tracking</title>
</head>
<body>
  <div id="buttonParent">
    <select id="halfLength">
      <option hidden>How long will the halves be?</option>
      <option value="20">20 Minutes</option>
      <option value="25">25 Minutes</option>
      <option value="30">30 Minutes</option>
      <option value="35">35 Minutes</option>
      <option value="40">40 Minutes</option>
      <option value="45">45 Minutes</option>
    </select>
    <br id="rawr"/>
    <br id="xd"/>
    <button onclick="startTimer()" id="startingTimer">Start Timer</button>
  </div>
  <p id="displayTime"></p>
  <div id="containerOne"></div>
  <p id="elapsedDisplay"></p>
  <div id="containerTwo"></div>
  <script>
    var date = null;
    var papay = null;
    var banan = null;
    var tomat = null;
    var startTime = null;
    var goalTimes = [];
    var displayStartTime = null;
    var elapsedTime = null;
    var rawr = null;
    var xd = null;
    var half = 0;
    var halfLength = null;
    // For finding elapsed time
    var elapsedTools = {
      date: null,
      time: null,
      elapsedTime: null,
      elapsedMinutes: null
    };

    // Get current time and update HTML
    function startTimer () {
      date = new Date();
      // Get the time since Jan 1, 1970 (measured in milliseconds)
      startTime = date.getTime();
      // Get the time of today (in hour:minute:second format)
      displayStartTime = date;
      document.getElementById("displayTime").innerHTML = "First half start time: " + displayStartTime;
      document.getElementById("containerOne").innerHTML = "<button onclick='findElapsed()'>Find Elapsed Time</button>";
      document.getElementById("containerTwo").innerHTML = "<button onclick='endHalf()'>End First Half</button>";
      papay = document.getElementById("buttonParent");
      banan = document.getElementById("startingTimer");
      // Save half length in tomat.value
      tomat = document.getElementById("halfLength");
      rawr = document.getElementById("rawr");
      xd = document.getElementById("xd");
      papay.removeChild(banan);
      papay.removeChild(tomat);
      papay.removeChild(rawr);
      papay.removeChild(xd);
      halfLength = tomat.value;
    }

    /*
    function findElapsed () {
      // Get the date at the time of clicking
      elapsedTools.date = new Date();
      // Get the time from the newly-defined elapsedTools.date object
      elapsedTools.time = elapsedTools.date.getTime();
      // Find the elapsed time by subtracting startTime from the current time, then divide by 1000 to go from ms to s
      elapsedTools.elapsedTime = (elapsedTools.time - startTime) / 1000;
    }
    */

    function endHalf () {
      document.getElementById("containerOne").innerHTML = "";
      document.getElementById("containerTwo").innerHTML = "<div id='containerThree'><button onclick='nextHalf()' id='nextHalfButton'>Begin next half</button></div>";
    }

    function nextHalf() {
      document.getElementById("displayTime").innerHTML += "<br/>Second half start time: " + new Date();
      document.getElementById("containerThree").removeChild(document.getElementById("nextHalfButton"));
      document.getElementById("containerOne").innerHTML = "<button onclick='findElapsed()'>Find Elapsed Time</button>";
      startTime = new Date().getTime();
      half = 1;
    }

    function findElapsed () {
      elapsedTools.date = new Date();
      elapsedTools.time = elapsedTools.date.getTime();
      elapsedTools.elapsedTime = ((elapsedTools.time - startTime) / 1000);
      elapsedTools.elapsedMinutes = Math.round(elapsedTools.elapsedTime / 60);
      if (elapsedTools.elapsedMinutes <= halfLength) {
        elapsedTools.elapsedMinutes = String(elapsedTools.elapsedMinutes + 1 + half * halfLength + "'");
      } else if (elapsedTools.elapsedMinutes > halfLength) {
        elapsedTools.elapsedMinutes = parseInt(halfLength, 10) + parseInt(half, 10) * parseInt(halfLength, 10);
        elapsedTools.elapsedMinutes += "+";
      }
      goalTimes.push(elapsedTools.elapsedMinutes);
    }
  </script>
</body>
</html>
